<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>웹 에디터 플러그인 데모</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-2xl font-bold mb-4">웹 에디터 플러그인 데모</h1>
        
        <div class="mb-6">
            <h2 class="text-lg font-semibold mb-2">텍스트 영역 예제:</h2>
            <textarea id="editor-textarea" class="w-full h-40 p-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="여기에 텍스트를 입력하세요...">이것은 샘플 텍스트입니다. 일부 텍스트를 선택하여 서식을 지정해 보세요.</textarea>
        </div>
        
        <div class="mb-6">
            <h2 class="text-lg font-semibold mb-2">편집 가능한 DIV 예제:</h2>
            <div id="editor-div" class="w-full min-h-40 p-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" contenteditable="true">
                <h1>FloatingEditor 기능 요건 정의</h1>

                <h2>1. 개요</h2>
                <p>FloatingEditor는 웹 페이지에 쉽게 통합할 수 있는 독립형 리치 텍스트 에디터 플러그인입니다. 사용자가 텍스트를 선택하면 선택 영역 위에 플로팅 툴바가 나타나 다양한 서식을 적용할 수 있게 합니다.</p>

                <h2>2. 핵심 기능 요건</h2>

                <h3>2.1 기본 기능</h3>
                <ul>
                    <li><strong>텍스트 선택 감지</strong>: textarea와 contenteditable 요소 모두에서 텍스트 선택을 감지합니다.</li>
                    <li><strong>플로팅 툴바 표시</strong>: 텍스트 선택 시 선택 영역 위에 플로팅 툴바를 표시합니다.</li>
                    <li><strong>서식 적용</strong>: 선택한 텍스트에 다양한 서식(굵게, 기울임, 밑줄 등)을 적용할 수 있습니다.</li>
                    <li><strong>서식 제거</strong>: 선택한 텍스트의 모든 서식을 제거할 수 있습니다.</li>
                </ul>

                <h3>2.2 지원 요소</h3>
                <ul>
                    <li><strong>textarea</strong>: 일반 텍스트 입력 영역에서 작동합니다.</li>
                    <li><strong>contenteditable 요소</strong>: 편집 가능한 DIV 등의 HTML 요소에서 작동합니다.</li>
                </ul>

                <h3>2.3 서식 옵션</h3>
                <ul>
                    <li><strong>굵게(Bold)</strong>: 선택한 텍스트를 굵게 표시합니다.</li>
                    <li><strong>기울임(Italic)</strong>: 선택한 텍스트를 기울여 표시합니다.</li>
                    <li><strong>밑줄(Underline)</strong>: 선택한 텍스트에 밑줄을 추가합니다.</li>
                    <li><strong>취소선(Strikethrough)</strong>: 선택한 텍스트에 취소선을 추가합니다.</li>
                    <li><strong>코드(Code)</strong>: 선택한 텍스트를 코드 형식으로 표시합니다.</li>
                    <li><strong>링크(Link)</strong>: 선택한 텍스트에 하이퍼링크를 추가합니다.</li>
                    <li><strong>서식 지우기(Clear Formatting)</strong>: 선택한 텍스트의 모든 서식을 제거합니다.</li>
                </ul>

                <h2>3. 사용자 경험 요건</h2>

                <h3>3.1 플로팅 툴바 위치</h3>
                <ul>
                    <li><strong>텍스트 영역(textarea)에서의 위치</strong>:
                        <ul>
                            <li>선택한 텍스트 위에 10px + 추가 5px 간격을 두고 표시합니다.</li>
                            <li>첫 줄 선택 시 텍스트 영역의 상단 패딩을 고려하여 적절한 위치에 표시합니다.</li>
                            <li>선택 영역의 시작 위치를 기준으로 가로 위치를 계산합니다.</li>
                        </ul>
                    </li>
                    <li><strong>편집 가능한 DIV에서의 위치</strong>:
                        <ul>
                            <li>선택한 텍스트 위에 10px 간격을 두고 표시합니다.</li>
                            <li>선택 영역의 가로 중앙에 툴바를 배치합니다.</li>
                        </ul>
                    </li>
                    <li><strong>화면 경계 고려</strong>:
                        <ul>
                            <li>툴바가 화면 상단을 벗어나거나 너무 가까울 경우(20px 미만) 선택 영역 아래에 표시합니다.</li>
                            <li>툴바가 화면 좌우 경계를 벗어나지 않도록 위치를 조정합니다.</li>
                        </ul>
                    </li>
                </ul>

                <h3>3.2 선택 방법 지원</h3>
                <ul>
                    <li><strong>마우스 드래그</strong>: 마우스로 텍스트를 드래그하여 선택할 때 툴바가 표시됩니다.</li>
                    <li><strong>더블 클릭</strong>: 단어를 더블 클릭하여 선택할 때 툴바가 표시됩니다.</li>
                    <li><strong>키보드 선택</strong>: 키보드(Shift+화살표 등)로 텍스트를 선택할 때 툴바가 표시됩니다.</li>
                </ul>

                <h2>4. 기술적 요건</h2>

                <h3>4.1 초기화 및 설정</h3>
                <ul>
                    <li><strong>선택자 기반 초기화</strong>: CSS 선택자 또는 DOM 요소를 통해 에디터를 초기화할 수 있습니다.</li>
                    <li><strong>사용자 설정</strong>: 툴바 오프셋, 활성화할 기능 등을 설정할 수 있습니다.</li>
                </ul>

                <h3>4.2 텍스트 선택 감지</h3>
                <ul>
                    <li><strong>textarea 선택 감지</strong>: selectionStart, selectionEnd 속성을 사용하여 선택 영역을 감지합니다.</li>
                    <li><strong>contenteditable 선택 감지</strong>: window.getSelection() API를 사용하여 선택 영역을 감지합니다.</li>
                </ul>

                <h3>4.3 좌표 계산</h3>
                <ul>
                    <li><strong>textarea 좌표 계산</strong>:
                        <ul>
                            <li>임시 요소를 사용하여 선택 영역의 정확한 위치를 계산합니다.</li>
                            <li>스크롤 위치를 고려하여 실제 화면상의 위치를 계산합니다.</li>
                            <li>첫 줄 선택 시 특별한 처리를 통해 적절한 위치를 계산합니다.</li>
                        </ul>
                    </li>
                    <li><strong>contenteditable 좌표 계산</strong>:
                        <ul>
                            <li>Range.getBoundingClientRect() 메서드를 사용하여 선택 영역의 위치를 계산합니다.</li>
                        </ul>
                    </li>
                </ul>

                <h2>5. 통합 요건</h2>

                <h3>5.1 웹페이지 통합</h3>
                <ul>
                    <li><strong>스크립트 및 스타일 포함</strong>: 필요한 JavaScript 파일과 CSS 파일을 웹페이지에 포함합니다.</li>
                    <li><strong>Material Icons 의존성</strong>: 툴바 버튼 아이콘을 위해 Material Icons 라이브러리를 포함합니다.</li>
                </ul>

                <h3>5.2 초기화 코드</h3>
                <pre><code>document.addEventListener('DOMContentLoaded', function() {
  // textarea와 contenteditable 요소에 에디터 적용
  FloatingEditor.init('textarea, [contenteditable="true"]', {
    toolbarOffset: 10,
    features: {
      bold: true,
      italic: true,
      underline: true,
      strikethrough: true,
      code: true,
      link: true,
      clear: true
    }
  });
});</code></pre>

                <h2>6. 브라우저 호환성</h2>
                <ul>
                    <li>최신 버전의 Chrome, Firefox, Safari, Edge 브라우저에서 작동해야 합니다.</li>
                    <li>모바일 브라우저에서도 적절하게 작동해야 합니다.</li>
                </ul>
            </div>
        </div>
        
        <div class="mt-8 p-4 bg-gray-50 rounded-md">
            <h2 class="text-lg font-semibold mb-2">디버그 정보:</h2>
            <div id="debug-info" class="font-mono text-sm bg-white p-2 border rounded"></div>
        </div>
    </div>

    <script src="editor.js"></script>
    <script>
        // 에디터 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // textarea에 에디터 적용
            FloatingEditor.init('#editor-textarea', {
                toolbarOffset: 15
            });
            
            // 편집 가능한 div에 에디터 적용
            FloatingEditor.init('#editor-div', {
                toolbarOffset: 15
            });
            
            // 디버그 정보 표시
            console.log('에디터 초기화 완료');
        });
    </script>
</body>
</html> 